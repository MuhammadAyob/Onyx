
<div style="padding-left: 3em; padding-right: 3em; padding-top: 9em;height:100vh;background-image: url('../../assets/gradient.gif');background-repeat: no-repeat;background-size: 100% 25%;">
  <mat-card class="matCard">
    <mat-tab-group>
      <mat-tab label="Course Overview" class="sections" style="color: #0e1a3c;">
        <div *ngIf="isLoading" 
        style="
        display: flex;
        align-items: center;
        justify-content: center;">
          <mat-spinner ></mat-spinner>
        </div>

        <div *ngIf="!isLoading">
          <mat-card>
            <!--Section table-->
           
           <div class="bigDiv" style="margin-bottom: -35px;">
             <div class="leftSearch">
               <form class="navbar-form">
                 <mat-form-field appearance="outline" color="white" style="width: 100%; border-color: white !important; color: #ffffff; padding-top: 1%;">
                   <mat-label style=" color: #ffffff; background-color: transparent; border-bottom: none; font-size: 15px; width: 100%;">Search Sections</mat-label>
                   <input type="text" style="border-color: #5090d000;" matInput name="searchDept" [(ngModel)]="search" placeholder="Ex. Section 1">
                   <mat-icon class="search" style="float: right; margin-top: -22px;">search</mat-icon>
                 </mat-form-field>
               </form>
             </div>
             <div fxFlex></div>
                     <div fxLayoutAlign="center center" style="margin-top: 25px;padding-right: 10px;" >
                       <button type="button" mat-mini-fab style="float: right; background-color: #920f4c;" class="btn btn-default btn-lg" (click)="addNewSection()">
                         <mat-icon aria-hidden="false" aria-label="Add FAQ" style="color: white; ">add</mat-icon></button>
                       </div>
           </div>
           <br>
           <mat-card-content style="padding-top: 1em;">

            <div *ngIf="courseDetails?.Sections?.length === 0" style="text-align: center; padding: 1em;">
              <p style="font-weight: 500; font-size: 18px;">No course content uploaded yet!</p>
            </div>

             <div class="container">
               <mat-accordion class="accordion">
                 <mat-expansion-panel class="shadow-panel" *ngFor="let section of courseDetails?.Sections | coursepipe: search ">
                   <mat-expansion-panel-header>
                     <mat-panel-title class="title">
                       <div class="center-align">
                        <p style="
                        white-space: nowrap;
                        overflow: hidden; 
                        text-overflow: ellipsis;"><b><u>{{ section.SectionName }}</u></b></p> 
                       </div>
                     
                       <div class="button-container2">
                         <button (click)="onViewSection(section)" mat-icon-button class="download-button" matTooltip="View Section">
                           <mat-icon>remove_red_eye</mat-icon>
                         </button>
                         <button (click)="onEditSection(section)" mat-icon-button class="download-button" matTooltip="Edit Section">
                           <mat-icon>edit</mat-icon>
                         </button>
                         <button (click)="onDeleteSection(section)" mat-icon-button class="download-button" matTooltip="Delete Section">
                           <mat-icon>delete</mat-icon>
                         </button>
                       </div>
                     </mat-panel-title>
                    
                   </mat-expansion-panel-header>
                   
                   <div style=" 
                   
                   width: 100%;
                   display: flex;
                   justify-content: center;
                   align-items: center;
                   margin-top: -8px;">
                     <h2 class="lessons-header">Add a new Lesson?</h2>
                     <button (click)="addLesson(section)" mat-icon-button matTooltip="Add">
                       <mat-icon>add</mat-icon>
                     </button>
                   
                    
                   </div>
                   <div class="mb">
                    <mat-form-field class="full-width">
                      <mat-label>Search</mat-label>
                      <input #queryInp matInput id="pdfQueryInput" type="text" placeholder="Lesson 1">
                      <mat-hint>Search for a lesson</mat-hint>
                    </mat-form-field>
                  </div>
                   <div *ngIf="!(section.Lessons?.length)" style="text-align: center; padding: 1em;">
                     No lessons in this section.
                   </div>
                   <div class="lessons-container">
                     <div class="lesson-card" *ngFor="let lesson of section.Lessons | lessonsearch:queryInp.value">
                       <mat-card>
                         <mat-card-content>
                           <div class="lesson-info">
                             <div class="lesson-name">
           
                               <div style=" 
                   
                               width: 100%;
                               display: flex;
                               justify-content: center;
                               align-items: center;
                               margin-top: -8px;">
                                 <h2 class="lessons-header">{{lesson.LessonName}} : </h2>
                                 <button (click)="onViewLesson(lesson)" mat-icon-button class="download-button" matTooltip="View Lesson">
                                   <mat-icon>remove_red_eye</mat-icon>
                                 </button>
                                 <button (click)="onEditLesson(lesson)" mat-icon-button class="download-button" matTooltip="Edit Lesson">
                                   <mat-icon>edit</mat-icon>
                                 </button>
                                 <button (click)="onDeleteLesson(lesson)" mat-icon-button class="download-button" matTooltip="Delete Lesson">
                                   <mat-icon>delete</mat-icon>
                                 </button>
                                
                               </div>
                             
                              
                             </div>
                           </div>
                          
                           <div class="lesson-resources">
                             <div style=" 
                   
                             width: 100%;
                             display: flex;
                           
                             align-items: center;
                             margin-top: -8px;">
                               <h2 class="lessons-header">Lesson Resources : </h2>
                               <button (click)="addResource(lesson)" mat-icon-button class="download-button" matTooltip="Add">
                                 <mat-icon>add</mat-icon>
                               </button>
                             
                              
                             </div>
                             <div class="mb">
                              <mat-form-field class="full-width">
                                <mat-label>Search</mat-label>
                                <input #queryInput matInput id="pdfSearchInp" type="text" placeholder="Python.pdf">
                                <mat-hint>Search for a resource</mat-hint>
                              </mat-form-field>
                            </div>
                             <ul>
                               <li *ngFor="let resource of lesson.LessonResources | resourcesearch:queryInput.value">
                                 <div class="resource">
                                   <span>{{ resource.ResourceName }}</span>
                                   <button (click)="onViewResource(resource)" mat-icon-button class="download-button" matTooltip="View Resource">
                                     <mat-icon>remove_red_eye</mat-icon>
                                   </button>
                                   <button (click)="onEditResource(resource)" mat-icon-button class="download-button" matTooltip="Edit Resource">
                                     <mat-icon>edit</mat-icon>
                                   </button>
                                   <button (click)="onDeleteResource(resource)" mat-icon-button class="download-button" matTooltip="Delete Resource">
                                     <mat-icon>delete</mat-icon>
                                   </button>
                                 </div>
                               </li>
                             </ul>
                           </div>
                           <div class="no-resources" *ngIf="!lesson.LessonResources || lesson.LessonResources.length === 0">
                             No lesson resources attached.
                           </div>
                         </mat-card-content>
                       </mat-card>
                       <div class="lesson-divider"></div>
                     </div>
                   </div>
                 </mat-expansion-panel>
               </mat-accordion>
             </div>
           </mat-card-content>
           <br>
           <div class="button-container">
            <button style=" 
            border: 2px solid rgb(0, 0, 0);
            border-radius: 50px;
            font-family: Montserrat;
            font-size: 16px;
            color: white;
            padding: 10px 25px 10px 25px;"
            id="cancel" class="btn" (click)="onBack()">Back</button>
             </div>
           </mat-card>
        </div>


      </mat-tab>
      <mat-tab label="Course Details" class="course" style="color: #0e1a3c;">
        <br>
        <mat-card-header class="cardHeader" style="padding-bottom: 1%;text-align: center">
          <mat-card-title-group style="margin: 0 auto;">
            <mat-card-title style="font-weight: 500">{{test.Name}}</mat-card-title>
          </mat-card-title-group>
    <div style="float:right;">
      <button mat-icon-button style="color: rgb(255, 255, 255); margin-top: -10px;" (click)="onEditCourse()">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button style="margin-top: -10px;" (click)="onDeleteCourse()">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
        
        </mat-card-header>

        <mat-card-content class="matContent">
          <!--Project Details-->
          <form>
            <div *ngIf="employeeList == null || undefined"
            style="
           display: flex;
           align-items: center;
           justify-content: center;">
             <mat-spinner ></mat-spinner>
           </div>
            <div class="form-group"  *ngIf="!(employeeList == null || undefined)">
              <br /><br />
             
              <h1 style="margin-left:42.5%;color: #0e1a3c; margin-bottom: -70px;"><b>Course Preview</b></h1>
              <br>
             
              <div class='embed-container'>
                <iframe [src]="test.Preview | VimeoUrl" frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
              </div>
              <br>
               <!--Image-->
               <div style="margin-left: 38%; padding-bottom: 50px;">
                <mat-label style="color: #0e1a3c; padding-left: 7%"
                  >Course Image</mat-label
                >
                <div>
                  <div>
                    <img
                      src="{{ 'data:image/png;base64,' + test.Image }}"
                      style="width: 200px; height:200px;padding-top: 10px;"
                    >
                  </div>
                </div>
              </div>
              <!--End-->
               <!--2 Columns-->
               <div class="container">
                <div class="row">
                  <div class="col-sm" style="float: left; padding-left: 5%;">
                    <mat-form-field
                    
                    class="example-full-width" appearance="legacy" [style.width.px]="350"
      
                  >
                       <mat-label style="color:#0e1a3c">Course Name</mat-label>
                       <input
                       readonly
                       type="text"
                       matInput
                       name="ProjectName"
                       [(ngModel)]="test.Name"
                       required
                    
                     />
                    </mat-form-field>
                  </div>
                  
            
                  
                  <div class="col-sm" style="float: right;padding-right: 10%;">
                    <mat-form-field
            
                    class="example-full-width" appearance="legacy" [style.width.px]="350"
            >
            <mat-label style="color: #0e1a3c">Course Activity</mat-label>
            <input
            readonly
            type="text"
            matInput
            name="ProjectStatusName"
            [(ngModel)]="test.Active"
            required
           
          />
            </mat-form-field>
                  </div>
                </div>
              </div>
    <br>
    <br>
              <br>
              <!--2 Columns-->
              <div class="container">
                <div class="row">
    <div class="col-sm" style="float: left;padding-left: 5%;">
      <mat-form-field
      class="example-full-width" appearance="legacy" [style.width.px]="350"

    >
         <mat-label style="color:#0e1a3c">Category</mat-label>
         <input
         readonly
         type="text"
         matInput
         name="ProjectStartDate"
         [(ngModel)]="category"
         required
      
       />
      </mat-form-field>
    </div>
    

    
    <div class="col-sm" style="float: right;padding-right: 10%;">
      <mat-form-field

      class="example-full-width" appearance="legacy" [style.width.px]="350"

>
<mat-label style="color: #0e1a3c">Price in Rands</mat-label>
<input
readonly
type="text"
matInput
name="ProjectEndDate"
[(ngModel)]="test.Price"
required
/>

</mat-form-field>
    </div>
                </div>
              </div>
<br>
<br>
              <br>
           <br>
              <mat-form-field
            
              class="example-full-width" appearance="legacy" style="width:85.5%;padding-left: 5%;"
        
        >
        <mat-label style="color: #0e1a3c">Course Description</mat-label>
        <textarea
              readonly
              matInput
              rows="7"
              cols="90"
              name="ProjectDesc"
              [(ngModel)]="test.Description"
              placeholder="Ex. The Flying Man"
             ></textarea>
        </mat-form-field>
<br>
<mat-form-field
class="example-full-width" appearance="legacy" style="width:85.5%;padding-left: 5%;"


>
   <mat-label style="color:#0e1a3c">Employees</mat-label>
   <input
   readonly
   type="text"
   matInput
   name="Employees"
  
 />
 <mat-list *ngFor="let item of employeeList">
   <mat-list-item style="color: #0e1a3c;">
     {{item.Name}} {{item.Surname}} - {{item.Email}}
   </mat-list-item>
 </mat-list>
</mat-form-field>
<div class="form-group" style="padding-right: 40%"></div>
</div>

          </form>
        </mat-card-content>
      </mat-tab>
    </mat-tab-group>
   </mat-card>
   <script src="https://player.vimeo.com/api/player.js"></script>
</div>
